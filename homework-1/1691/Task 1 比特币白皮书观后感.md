# Task 1：比特币白皮书观后感

## 1 简介
中本聪想要创建一套不需要可信任的第三方来协助双方达成交易的金融系统。在传统的金融体系中所有交易都由一个可信任的第三方（如：银行）执行，这本质上存在一定的风险，例如 2008 年的金融危机多家银行倒闭。中本聪创建的这一整套系统是基于密码学、博弈论和计算机，取名为比特币。因此在这里你可以理解比特币是一个点对点的电子支付系统，也可以是货币的名称

## 交易
在比特币网络中，所有的交易都是透明化的，也就是说所有人都可以看到A转账给B。但只要没在公开场合说A地址是林XX，B地址是陈XX，那大家在网络上只看到两个地址的交易记录和资产情况，保留了一点的隐私性。

在一笔交易中，A想要转账给B，A会使用B的公钥对交易进行加密，之后由B对这个交易进行验证并签名，至此转账成功。

在比特币网络中UTXO模型是用来跟踪所有未被花费的交易输出的系统。可以理解每个用户的余额都用UTXO来表示，每个UTXO实际的金额都不同，例如A的余额里有UTXO1和UTXO2，UTXO1里有1.5个BTC，而UTXO2有0.5个BTC，这样A的余额就有2个BTC。

假设A想要转账0.6个BTC，A输入UTXO1，这时B会得到0.6BTC,而剩下的0.9个BTC会返回以一个新的UTXO3返回到你的账户。当然B在接受0.6个BTC也是以一个新的UTXO返回到他的账户，这样设置的主要目的是为了防止货币被重复使用。想象如果是一个简单的账户计算系统，如果这时有恶意的用户打算用他仅剩下的1个BTC同时支付两个价值为1BTC的物品。为了避免这种情况发生，因此使用UTXO模型，每个账户中的UTXO只能被使用一次，每当使用后就会被销毁并生成一个新的UTXO。

## 工作量证明
区块，简单理解就是多个交易打包并放入区块中，而区块链就是区块接上当前的链，表示这些区块中的交易都是正确的。我们可以想象弄一条无限长的手串，你每次在放入一个珍珠前都仔细检查它是否完好无损，不存在裂痕后才会放入手串里。

工作量证明（PoW）是一个共识机制，它的作用是创建一个新的区块并广播到所有节点上，也就说找到了一个珍珠并告诉所有验证者们。接下来讨论PoW的工作流程：

1. 已知上个区块头的数据有：前一区块哈希、Merkle哈希、时间戳、难度目标。
2. 矿工随机选择一个Nonce值。
3. 把区块头的数据和Nonce放进哈希函数进行计算。
4. 如果计算出的哈希值满足小于当前网络设定的目标值，则成功创建新区块；否则重新2~4的步骤。
5. 创建一个新的区块后会将其广播到整个网络，让其他节点进行验证。

在这一过程中由于哈希的特性，因此矿工只能通过暴力破解，一直重复地试错找到一个Nonce值。因此需要大量的计算资源。这里必须理清一个概念，PoW的目标只是让网络上的所有节点竞争创建一个新的区块，并没有进行验证。因此PoW的过程只是在随机寻找一个符合条件的珍珠，并没有认真地去进行检查。

当然这个过程可能恰好有两个矿工同时找到正确的Nonce值，这时就会有出现分支。在比特币网络中设定了取最长链为主链，也就是在一段时间后会再次检查链的情况，如果发现分支中的链哪个最长便对其保留，其他的则删除。

为了让这个系统能够持续运作，因此需要一些激励机制让大家愿意进入网络成为验证者。至此比特币网络会为成功获得PoW资格的矿工提供一定的奖励。

## 网络
这里直接把白皮书的内容搬过来，已经描述地很清楚了。

运行网络的步骤如下：

1. 新交易向所有节点广播。
2. 每个节点将新的交易收集到一个区块中。
3. 每个节点为它的区块寻找PoW。
4. 当一个节点找到了PoW，向所有节点广播这个区块。
5. 节点只有在区块内所有交易都是有效的且之前没有被支付的情况下接收这个区块。
6. 节点通过使用这个区块的哈希值作为上个哈希值，在链中创建下一个区块的方式表示对这个区块的接受。

这里也继续讨论可能出现区块分支的情况，也就是说可能一部分的节点收到一个区块，另一部分的节点收到另一个区块。由于设定了取最长链为主链，也就是最终所有节点都会回到主链上。


新交易的广播不一定所有节点都能接受到，如果出现缺失的情况并成功获得PoW，那会在下一次的PoW重新提交交易到区块中。同理如果以一个节点没有收到某个区块，它也会在下一个新区块时向其它节点请求缺失的区块。
